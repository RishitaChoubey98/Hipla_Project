(this["webpackJsonpcontact-tracing"]=this["webpackJsonpcontact-tracing"]||[]).push([[11],{407:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return v}));var l=a(38),n=a(9),o=a(10),r=a(12),c=a(11),s=a(0),m=a.n(s),i=a(75),d=a.n(i),p=a(15),u=a(32),y=a.n(u),h=a(137),E=a(88),g=a(308),f=a(167),v=function(e){Object(r.a)(a,e);var t=Object(c.a)(a);function a(){var e;return Object(n.a)(this,a),(e=t.call(this)).searchSpace=function(t){e.setState({search:t})},e.getBreachData=function(){var t={};switch(e.state.showDays){case"1":t={from_date:Object(h.default)(new Date,"yyyy-MM-dd"),to_date:Object(h.default)(Object(E.default)(new Date,1),"yyyy-MM-dd")};break;case"7":t={from_date:Object(h.default)(Object(E.default)(new Date,-6),"yyyy-MM-dd"),to_date:Object(h.default)(Object(E.default)(new Date,1),"yyyy-MM-dd")};break;case"14":t={from_date:Object(h.default)(Object(E.default)(new Date,-13),"yyyy-MM-dd"),to_date:Object(h.default)(Object(E.default)(new Date,1),"yyyy-MM-dd")}}e.setState({isLoading:!0,csv:[["Name","Department","COVID-19 Status","Breach with","Department","COVID-19 Status","Distance (+ /- 1.5 ft )","Source","Time | Date"]]}),Object(p.i)("/api/cross/history/company",t).then((function(a){if(console.log(a),e.setState({isLoading:!1},(function(){return e.getHero(t)})),201===a.request.status){var n=Object(l.a)(e.state.csv);a.data.result.data.map((function(e,t){return n[t+1]=new Array(void 0!==e.employee&&void 0!==e.employee[0]?e.employee[0].name:"Unknown",void 0!==e.employee&&void 0!==e.employee[0]&&e.employee[0].department?e.employee[0].department:"N/A",void 0!==e.employee&&void 0!==e.employee[0]?e.employee[0].is_conta_tracing?"POSITIVE":"NEGATIVE":"N/A",void 0!==e.cross_employee&&void 0!==e.cross_employee[0]?e.cross_employee[0].name:"Unknown",void 0!==e.cross_employee&&void 0!==e.cross_employee[0]&&e.cross_employee[0].department?e.cross_employee[0].department:"N/A",void 0!==e.cross_employee&&void 0!==e.cross_employee[0]?e.cross_employee[0].is_conta_tracing?"POSITIVE":"NEGATIVE":"N/A",e.distance.toFixed(2),e.source,Object(g.default)(e.cross_date).getHours()+":"+Object(g.default)(e.cross_date).getMinutes()+":"+Object(g.default)(e.cross_date).getSeconds()+" | "+Object(g.default)(e.cross_date).toDateString()),e})),e.setState({breaches:a.data.result.data,csv:n})}}))},e.getHero=function(t){Object(p.i)("/api/cross/hero",t).then((function(t){e.setState({isLoading:!1}),201===t.request.status&&(console.log(t.data.result,"============================>>>>>>>>>>>>>>>>>"),t.data.result.length>0&&e.setState({hero:t.data.result[0]}))}))},e.state={currentPage:1,itemsCountPerPage:5,showDays:"1",breaches:[],isLoading:!1,search:"mobile",hero:[],csv:[["Name","Department","COVID-19 Status","Breach with","Department","COVID-19 Status","Distance (+ /- 1.5 ft )","Source","Time | Date"]]},e}return Object(o.a)(a,[{key:"componentDidMount",value:function(){this.getBreachData()}},{key:"render",value:function(){var e=this,t=this.state.breaches.filter((function(t){return null==e.state.search||t.source.toLowerCase().includes(e.state.search.toLowerCase())?t:void 0})),a=this.state.currentPage*this.state.itemsCountPerPage,l=a-this.state.itemsCountPerPage,n=t.slice(l,a);return m.a.createElement("div",{className:"employee-directoryprt"},m.a.createElement("div",{className:"topemployeeheader"},m.a.createElement("div",{className:"leftheadingprt"},m.a.createElement("h2",null,"Contact History"),0===Object.keys(this.state.hero).length?null:m.a.createElement("h2",null,"MOST BREACHED: \xa0",m.a.createElement("span",null,0!==Object.keys(this.state.hero.employee).length&&this.state.hero.employee[0].profile_photo?m.a.createElement("img",{src:this.state.hero.employee[0].profile_photo}):m.a.createElement("img",{src:"".concat("https://contatrack.ai","/assets/images/menProfileNoImage.jpg")})),m.a.createElement("b",{style:{color:"#2e59a8"}},0===Object.keys(this.state.hero.employee).length?"Unknown":this.state.hero.employee[0].name," (",this.state.hero.count,")"))),m.a.createElement("div",{className:"exportdataprt"},m.a.createElement(f.CSVLink,{data:this.state.csv,filename:"".concat(Object(h.default)(new Date,"dd-MM-yy-HH:mm"),".csv"),target:"_blank"},m.a.createElement("i",{className:"fa fa-download"})," EXPORT TO CSV"),m.a.createElement("select",{onChange:function(t){e.setState({showDays:t.target.value,currentPage:1},(function(){e.getBreachData()}))}},m.a.createElement("option",{value:1},"Today"),m.a.createElement("option",{value:7},"7 days"),m.a.createElement("option",{value:14},"14 days")))),m.a.createElement("div",{className:"tableprt"},m.a.createElement("table",{cellPadding:"0",cellSpacing:"0"},m.a.createElement("thead",null,m.a.createElement("tr",null,m.a.createElement("th",null,"\xa0"),m.a.createElement("th",null,"NAME"),m.a.createElement("th",null,"Department"),m.a.createElement("th",null,"COVID-19"),m.a.createElement("th",null,"\xa0"),m.a.createElement("th",null,"Breach with"),m.a.createElement("th",null,"Department"),m.a.createElement("th",null,"COVID-19"),m.a.createElement("th",null,"Distance (+ /- 1.5 ft )"),m.a.createElement("th",null,"source"),m.a.createElement("th",{style:{textAlign:"right"}},"time | date"))),m.a.createElement("tbody",null,this.state.isLoading?m.a.createElement("tr",null,m.a.createElement("td",{colSpan:11},m.a.createElement("div",{style:{textAlign:"center"}},m.a.createElement(y.a,{color:"primary"})))):0===n.length?m.a.createElement("tr",null,m.a.createElement("td",{colSpan:11},m.a.createElement("p",{style:{textAlign:"center"}},"No breaches found"))):n.map((function(e,t){return m.a.createElement("tr",{key:t},m.a.createElement("td",null,m.a.createElement("a",{"data-toggle":"modal","data-target":"#addbrowseModal"},m.a.createElement("div",{className:"userimg"},void 0!==e.employee&&void 0!==e.employee[0]&&void 0!==e.employee[0].profile_photo?m.a.createElement("img",{src:e.employee[0].profile_photo,alt:"emp"}):m.a.createElement("img",{src:"".concat("https://contatrack.ai","/assets/images/menProfileNoImage.jpg")})))),m.a.createElement("td",{title:"NAME"},m.a.createElement("b",null,void 0!==e.employee&&void 0!==e.employee[0]?e.employee[0].name:"Unknown")),m.a.createElement("td",{title:"department"},m.a.createElement("b",null,void 0!==e.employee&&void 0!==e.employee[0]&&e.employee[0].department?e.employee[0].department:"N/A")),m.a.createElement("td",{title:"department"},void 0!==e.employee&&void 0!==e.employee[0]?e.employee[0].is_conta_tracing?m.a.createElement("b",{style:{color:"red"}},"POSITIVE"):m.a.createElement("b",{style:{color:"green"}},"NEGATIVE"):m.a.createElement("b",null,"N/A")),m.a.createElement("td",null,m.a.createElement("a",{"data-toggle":"modal","data-target":"#addbrowseModal"},m.a.createElement("div",{className:"userimg"},void 0!==e.cross_employee&&void 0!==e.cross_employee[0]&&void 0!==e.cross_employee[0].profile_photo?m.a.createElement("img",{src:e.cross_employee[0].profile_photo,alt:"emp"}):m.a.createElement("img",{src:"".concat("https://contatrack.ai","/assets/images/menProfileNoImage.jpg")})))),m.a.createElement("td",{title:"Breach with"},m.a.createElement("b",null,void 0!==e.cross_employee&&void 0!==e.cross_employee[0]?e.cross_employee[0].name:"Unknown")),m.a.createElement("td",null,m.a.createElement("b",null,void 0!==e.cross_employee&&void 0!==e.cross_employee[0]&&e.cross_employee[0].department?e.cross_employee[0].department:"N/A")),m.a.createElement("td",null,void 0!==e.cross_employee&&void 0!==e.cross_employee[0]?e.cross_employee[0].is_conta_tracing?m.a.createElement("b",{style:{color:"red"}},"POSITIVE"):m.a.createElement("b",{style:{color:"green"}},"NEGATIVE"):m.a.createElement("b",null,"N/A")),m.a.createElement("td",{title:"distance"},e.distance.toFixed(2)),m.a.createElement("td",{title:"source"},e.source),m.a.createElement("td",{title:"datetime"}," ",Object(g.default)(e.cross_date).getHours()+":"+Object(g.default)(e.cross_date).getMinutes()+":"+Object(g.default)(e.cross_date).getSeconds()," |",Object(g.default)(e.cross_date).toDateString()," "))}))))),m.a.createElement("div",{className:"pegignation-part"},m.a.createElement(d.a,{activePage:this.state.currentPage,itemsCountPerPage:this.state.itemsCountPerPage,totalItemsCount:t.length,pageRangeDisplayed:5,itemClass:"pegignation",innerClass:"pegignation-wrapper",activeClass:"active",onChange:function(t){return e.setState({currentPage:t})}})))}}]),a}(s.Component)}}]);
//# sourceMappingURL=11.b40d134f.chunk.js.map